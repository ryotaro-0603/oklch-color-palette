---
import Layout from "../layouts/Layout.astro";
import ColorPicker from "../components/ColorPicker.tsx";
import "../styles/global.css";
---

<Layout title="OKLCH Color Converter">
  <main>
    <div class="header">
      <h1>OKLCH Color Converter</h1>
      <p class="subtitle">先進的な色空間でのカラー変換ツール</p>
    </div>

    <div class="main-container">
      <div class="color-section">
        <div class="color-picker-wrapper">
          <h3>カラーピッカー</h3>
          <ColorPicker client:load initialColor="#f64466" />

          <label for="paletteCount">パレット数</label>
          
          <div class="slider-container">
            <span class="slider-label">5</span>
            <input type="range" id="paletteCount" min="5" max="13" value="12" class="palette-slider" />
            <span class="slider-label">13</span>
          </div>
          <div class="slider-value">
            <span id="paletteCountValue">12</span>色
          </div>

          <label for="sigmoidSteepness">シグモイドカーブ</label>
          
          <div class="slider-container">
            <span class="slider-label">0.0</span>
            <input type="range" id="sigmoidSteepness" min="0" max="1" step="0.1" value="0.5" class="palette-slider" />
            <span class="slider-label">1.0</span>
          </div>
          <div class="slider-value">
            <span id="sigmoidSteepnessValue">0.5</span>
          </div>

          <label for="chromaPeak">彩度カーブピーク</label>
          
          <div class="slider-container">
            <span class="slider-label">0.0</span>
            <input type="range" id="chromaPeak" min="0" max="1" step="0.1" value="0.5" class="palette-slider" />
            <span class="slider-label">1.0</span>
          </div>
          <div class="slider-value">
            <span id="chromaPeakValue">0.5</span>
          </div>

          <label for="chromaHeight">彩度カーブ高さ</label>
          
          <div class="slider-container">
            <span class="slider-label">0.0</span>
            <input type="range" id="chromaHeight" min="0" max="2" step="0.1" value="1" class="palette-slider" />
            <span class="slider-label">2.0</span>
          </div>
          <div class="slider-value">
            <span id="chromaHeightValue">1.0</span>
          </div>

          <div class="graph-container">
            <h4>カーブプレビュー</h4>
            <div class="graph-wrapper">
              <canvas id="curveGraph" width="280" height="200"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div id="paletteSection" class="palette-section" style="display: none;">
        <div id="palette" class="palette-grid"></div>
      </div>
    </div>
  </main>
</Layout>

<script>
  import { initPalette } from "../scripts/palette.ts";
  window.addEventListener("DOMContentLoaded", initPalette);
</script>

